<article
  class="group relative flex flex-col overflow-hidden bg-[#0d1117] ring-1 ring-white/10 transition-all duration-300 hover:ring-accent/50 hover:shadow-[0_0_30px_rgba(255,111,60,0.1)] h-full"
>
  <!-- Technical corner accents -->
  <div
    class="absolute -top-1 -left-1 w-3 h-3 border-l border-t border-white/10 group-hover:border-accent transition-colors"
  ></div>
  <div
    class="absolute -bottom-1 -right-1 w-3 h-3 border-r border-b border-white/10 group-hover:border-accent transition-colors"
  ></div>

  <!-- Image Area -->
  <div
    class="aspect-[16/10] sm:aspect-[3/2] bg-[#161b22] relative overflow-hidden border-b border-white/5"
  >
    <img
      [src]="productImage()"
      alt="{{ product().name }}"
      class="absolute inset-0 h-full w-full object-cover transition duration-700 group-hover:scale-105 opacity-80 group-hover:opacity-100"
      loading="lazy"
    />
    <!-- Scanline overlay -->
    <div
      class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNCIgaGVpZ2h0PSI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0wIDBoNHYxSDB6IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9IjAuMiIvPjwvc3ZnPg==')] opacity-20 pointer-events-none"
    ></div>

    <!-- Badges -->
    <div class="absolute top-4 inset-x-4 flex justify-between items-start pointer-events-none">
      <span
        class="inline-flex items-center px-2 py-1 text-[10px] font-mono uppercase tracking-wider bg-black/80 backdrop-blur border border-white/10 text-white"
      >
        {{ product().price.amountMinor === 0 ? 'ACCESS: OPEN' : 'ACCESS: PREMIUM' }}
      </span>
    </div>
  </div>

  <!-- Content -->
  <div class="flex flex-1 flex-col p-6">
    <!-- Header -->
    <div class="flex items-start justify-between gap-4">
      <div>
        <h3 class="text-lg font-bold text-white leading-snug font-sans tracking-tight">
          <a
            [href]="product().buyUrl"
            target="_blank"
            class="focus:outline-none"
            [attr.aria-label]="'View details for ' + product().name + ' (opens in new tab)'"
          >
            <span class="absolute inset-0" aria-hidden="true"></span>
            {{ product().name }}
          </a>
        </h3>
        <p class="mt-1 text-xs font-mono text-white/40 uppercase tracking-wide">
          {{ product().bestFor.slice(0, 3).join(' // ') }}
        </p>
      </div>
      <p class="text-lg font-bold text-accent shrink-0 font-mono">
        {{
          product().price.label ??
            (product().price.amountMinor / 100
              | currency: product().price.currency : 'symbol' : '1.2-2')
        }}
      </p>
    </div>

    <p class="mt-4 text-sm leading-relaxed text-white/60 line-clamp-2">
      {{ product().description }}
    </p>

    <!-- Features -->
    <div class="mt-5 space-y-2 border-t border-dashed border-white/10 pt-5">
      @for (chip of product().chips.slice(0, 3); track chip) {
        <div class="flex items-center gap-2 text-xs font-mono text-white/50">
          <span class="text-accent">></span>
          {{ chip }}
        </div>
      }
    </div>

    <!-- Spacer -->
    <div class="flex-1"></div>

    <!-- CTA -->
    <div class="mt-6 pt-2">
      <div
        class="flex w-full items-center justify-center bg-white/5 border border-white/10 px-4 py-3 text-xs font-bold uppercase tracking-widest text-white transition-all group-hover:bg-accent group-hover:text-white group-hover:border-accent font-mono"
      >
        {{ product().price.amountMinor === 0 ? 'INITIATE_DOWNLOAD' : 'ACQUIRE_LICENSE' }}
      </div>
    </div>
  </div>
</article>
