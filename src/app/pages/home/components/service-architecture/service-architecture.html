<section class="relative bg-grid-tech section-padding overflow-hidden border-t border-white/5">
  <!-- Technical Grid -->
  <div class="absolute inset-0 -z-10 bg-[size:40px_40px] bg-grid-white/[0.02]"></div>

  <div class="layout-container relative z-10">
    <!-- Section Header -->
    <app-section-header
      subtitle="SYSTEM_MODULES"
      title="Engineering Services"
      description="For Scale-Ups and Enterprises where 'slow engineering' is a business risk. I replace ad-hoc freelancing with a structured 'Stabilizer Protocol': Audit, Sprint, and Retainer. Predictable velocity, zero debt."
      class="font-mono"
    />

    <!-- Cards Grid -->
    <div class="mx-auto grid max-w-lg grid-cols-1 gap-8 lg:max-w-none lg:grid-cols-3">
      @for (
        tier of tiers();
        track tier.name;
        let first = $first;
        let last = $last;
        let index = $index
      ) {
        <app-card
          [variant]="tier.featured ? 'highlight' : 'default'"
          [interactive]="!tier.featured"
          class="flex flex-col justify-between p-8 xl:p-10 relative overflow-hidden group border border-white/5 hover:border-primary/30 transition-all"
        >
          <!-- Featured Highlight -->
          @if (tier.featured) {
            <div class="absolute inset-0 bg-primary/5 pointer-events-none"></div>
            <div
              class="absolute top-0 w-full h-px bg-gradient-to-r from-transparent via-primary/50 to-transparent"
            ></div>
            <div
              class="absolute bottom-0 w-full h-px bg-gradient-to-r from-transparent via-primary/50 to-transparent"
            ></div>
          }

          <div class="relative">
            <!-- Module Header -->
            <header
              class="flex items-center justify-between gap-x-4 mb-6 pb-4 border-b border-white/5"
            >
              <div class="flex flex-col">
                <span class="text-[10px] font-mono text-white/40 uppercase tracking-wider mb-1"
                  >MODULE_0{{ index + 1 }}</span
                >
                <h3
                  class="text-lg font-mono uppercase tracking-tight text-white group-hover:text-primary transition-colors"
                  [class.text-primary]="tier.featured"
                >
                  {{ tier.name }}
                </h3>
              </div>

              @if (tier.featured) {
                <div
                  class="flex items-center gap-1.5 px-2 py-1 bg-primary/10 border border-primary/20 rounded-sm"
                >
                  <span class="w-1.5 h-1.5 rounded-full bg-primary animate-pulse"></span>
                  <span class="text-[10px] font-mono text-primary uppercase">POPULAR</span>
                </div>
              }
            </header>

            <!-- Description -->
            <p class="text-sm leading-6 text-white/60 font-light mb-8 min-h-12">
              {{ tier.description }}
            </p>

            <!-- Specs List -->
            <div class="space-y-3">
              <div
                class="text-[10px] font-mono text-white/30 uppercase tracking-widest border-b border-white/5 pb-1 mb-3"
              >
                Specifications
              </div>
              @for (feature of tier.features; track feature) {
                <div class="flex gap-x-3 items-start group/item">
                  <div
                    class="mt-1.5 w-1 h-1 bg-white/40 rotate-45 group-hover/item:bg-primary transition-colors"
                  ></div>
                  <span class="text-sm text-white/80 font-mono">{{ feature }}</span>
                </div>
              }
            </div>
          </div>

          <!-- CTA Button -->
          <div class="mt-8 pt-6 border-t border-white/5">
            <app-button
              [href]="tier.ctaLink"
              [variant]="tier.featured ? 'primary' : 'ghost'"
              [styleClass]="
                'w-full font-mono text-xs uppercase tracking-widest ' +
                (!tier.featured
                  ? 'border border-white/10 hover:border-white/30 hover:bg-white/5 text-white'
                  : '')
              "
            >
              @if (tier.featured) {
                <span class="mr-2">[</span> {{ tier.ctaText }} <span class="ml-2">]</span>
              } @else {
                {{ tier.ctaText }}
              }
            </app-button>
          </div>
        </app-card>
      }
    </div>
  </div>
</section>
