<section
  class="section-padding relative isolate overflow-hidden bg-slate-950 border-t border-white/5"
>
  <!-- Technical Grid -->
  <div class="absolute inset-0 -z-10 bg-grid-tech"></div>

  <div class="layout-container relative z-10">
    <app-section-header subtitle="ENGAGEMENT_MATRIX" title="Service Tiers" class="font-mono" />

    <!-- Mobile View (Styled Cards) -->
    <div class="grid grid-cols-1 gap-8 lg:hidden">
      @for (tier of tiers(); track tier.name) {
        <app-card
          [variant]="tier.highlighted ? 'highlight' : 'default'"
          class="border border-white/10"
        >
          <div class="p-8">
            @if (tier.highlighted) {
              <div
                class="absolute top-0 right-0 bg-primary/20 text-primary px-3 py-1 text-[10px] font-mono uppercase tracking-wider border-b border-l border-primary/20"
              >
                RECOMMENDED
              </div>
            }

            <h3
              id="{{ tier.id }}-mobile"
              class="text-lg font-mono font-bold leading-8 text-white uppercase"
            >
              {{ tier.name }}
            </h3>
            <p class="mt-4 text-sm leading-6 text-white/60 font-mono border-l border-white/10 pl-3">
              {{ tier.bestFor }}
            </p>

            <ul class="mt-8 space-y-4 text-xs leading-6 text-white/60 font-mono">
              <li class="flex justify-between border-b border-white/5 pb-2">
                <span class="text-white/40 uppercase tracking-wider">Timeline:</span>
                <span class="text-white">{{ tier.timeline }}</span>
              </li>
              <li class="flex justify-between border-b border-white/5 pb-2">
                <span class="text-white/40 uppercase tracking-wider">Investment:</span>
                <span class="text-white">{{ tier.investment }}</span>
              </li>
            </ul>

            <app-button
              [href]="tier.ctaLink"
              [variant]="tier.highlighted ? 'primary' : 'ghost'"
              [styleClass]="
                'mt-8 w-full font-mono text-xs uppercase tracking-widest ' +
                (tier.highlighted
                  ? ''
                  : 'border border-white/10 text-white hover:bg-white/10 hover:text-white hover:border-white/30')
              "
            >
              {{ tier.ctaText }}
            </app-button>
          </div>
        </app-card>
      }
    </div>

    <!-- Desktop View (Data Table) -->
    <div class="hidden lg:block space-y-2" role="table" aria-label="Comparison of Service Options">
      <!-- Header -->
      <div
        class="grid grid-cols-12 gap-4 px-6 py-3 text-xs font-mono font-semibold text-white/30 uppercase tracking-widest border-b border-white/10"
        role="rowgroup"
      >
        <div class="contents" role="row">
          <span class="col-span-3" role="columnheader">Service_Module</span>
          <span class="col-span-4" role="columnheader">Target_Outcome</span>
          <span class="col-span-2 text-center" role="columnheader">Duration</span>
          <span class="col-span-2 text-center" role="columnheader">Cost_Basis</span>
          <span class="col-span-1" role="columnheader"><span class="sr-only">Init</span></span>
        </div>
      </div>

      <!-- Rows -->
      <div role="rowgroup" class="space-y-2">
        @for (tier of tiers(); track tier.name) {
          <div
            class="group grid grid-cols-12 gap-4 items-center p-4 bg-white/[0.02] border border-white/5 hover:border-primary/30 transition-all hover:bg-white/[0.04]"
            [class.border-primary-50]="tier.highlighted"
            role="row"
          >
            <!-- Service Name -->
            <div class="col-span-3" role="cell">
              <div class="flex items-center gap-3">
                @if (tier.highlighted) {
                  <div class="w-1.5 h-1.5 bg-primary animate-pulse rounded-sm"></div>
                } @else {
                  <div class="w-1.5 h-1.5 bg-white/20 rounded-sm"></div>
                }
                <h3
                  class="text-sm font-mono font-bold text-white uppercase group-hover:text-primary transition-colors"
                  id="{{ tier.id }}-desktop"
                >
                  {{ tier.name }}
                </h3>
              </div>
            </div>

            <!-- Best For -->
            <div class="col-span-4 text-xs font-mono text-white/60 leading-relaxed" role="cell">
              {{ tier.bestFor }}
            </div>

            <!-- Timeline -->
            <div class="col-span-2 text-center" role="cell">
              <div
                class="inline-block px-2 py-1 bg-white/5 rounded-sm text-[10px] font-mono text-white/80 border border-white/10"
              >
                {{ tier.timeline }}
              </div>
            </div>

            <!-- Investment -->
            <div
              class="col-span-2 text-center text-xs font-mono font-semibold text-white/80"
              role="cell"
            >
              {{ tier.investment }}
            </div>

            <!-- Action -->
            <div class="col-span-1 flex justify-end" role="cell">
              @if (tier.ctaLink.startsWith('/')) {
                <a
                  [routerLink]="tier.ctaLink"
                  class="p-2 text-white/40 hover:text-primary transition-colors hover:bg-white/5 rounded-sm"
                >
                  <span class="sr-only">{{ tier.ctaText }}</span>
                  <svg
                    class="h-4 w-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="2"
                    stroke="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                    />
                  </svg>
                </a>
              } @else {
                <a
                  [href]="tier.ctaLink"
                  class="p-2 text-white/40 hover:text-primary transition-colors hover:bg-white/5 rounded-sm"
                  target="_blank"
                >
                  <span class="sr-only">{{ tier.ctaText }}</span>
                  <svg
                    class="h-4 w-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="2"
                    stroke="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
                    />
                  </svg>
                </a>
              }
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</section>
