<section class="section-padding relative isolate overflow-hidden bg-secondary">
  <!-- Interactive Background -->
  <div
    class="absolute inset-0 -z-10 bg-[radial-gradient(45rem_50rem_at_top,theme(colors.primary),transparent)] opacity-10"
  ></div>
  <div
    class="absolute inset-y-0 right-1/2 -z-10 mr-16 w-[200%] origin-bottom-left skew-x-[-30deg] bg-secondary shadow-xl shadow-primary/10 ring-1 ring-white/5 sm:mr-28 lg:mr-0 lg:-ml-96 lg:w-[200%]"
  ></div>

  <div class="layout-container">
    <app-section-header subtitle="Compare Options" title="Choose Your Engagement Model" />

    <!-- Mobile View (Styled Cards) -->
    <div class="grid grid-cols-1 gap-8 lg:hidden">
      @for (tier of tiers(); track tier.name) {
        <app-card [variant]="tier.highlighted ? 'highlight' : 'default'">
          <div class="p-8">
            @if (tier.highlighted) {
              <div class="absolute -top-4 left-0 right-0 flex justify-center">
                <app-badge variant="solid" color="accent">Most Popular</app-badge>
              </div>
            }

            <h3 id="{{ tier.id }}-mobile" class="text-xl font-bold leading-8 text-white">
              {{ tier.name }}
            </h3>
            <p class="mt-4 text-sm leading-6 text-white/60">{{ tier.bestFor }}</p>

            <ul class="mt-8 space-y-4 text-sm leading-6 text-white/60">
              <li class="flex gap-x-3">
                <svg
                  class="h-6 w-5 flex-none text-primary"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="text-white font-medium">Timeline:</span> {{ tier.timeline }}
              </li>
              <li class="flex gap-x-3">
                <svg
                  class="h-6 w-5 flex-none text-primary"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="text-white font-medium">Investment:</span> {{ tier.investment }}
              </li>
            </ul>

            <app-button
              [href]="tier.ctaLink"
              [variant]="tier.highlighted ? 'primary' : 'ghost'"
              [styleClass]="
                'mt-8 w-full ' +
                (tier.highlighted ? '' : 'text-white hover:bg-white/10 hover:text-white')
              "
            >
              {{ tier.ctaText }}
            </app-button>
          </div>
        </app-card>
      }
    </div>

    <!-- Desktop View (Transposed List Layout) -->
    <div class="hidden lg:block space-y-4" role="table" aria-label="Comparison of Service Options">
      <!-- Header -->
      <div
        class="grid grid-cols-12 gap-4 px-6 py-3 text-sm font-semibold text-white/50 border-b border-white/10"
        role="rowgroup"
      >
        <div class="contents" role="row">
          <span class="col-span-3" role="columnheader">Service</span>
          <span class="col-span-4" role="columnheader">Best For</span>
          <span class="col-span-2 text-center" role="columnheader">Timeline</span>
          <span class="col-span-2 text-center" role="columnheader">Investment</span>
          <span class="col-span-1" role="columnheader"><span class="sr-only">Actions</span></span>
        </div>
      </div>

      <!-- Rows -->
      <div role="rowgroup" class="space-y-2">
        @for (tier of tiers(); track tier.name) {
          <app-card
            [variant]="tier.highlighted ? 'highlight' : 'default'"
            [interactive]="true"
            class="block"
          >
            <div class="grid grid-cols-12 gap-4 items-center p-6" role="row">
              <!-- Service Name -->
              <div class="col-span-3" role="cell">
                <div class="flex items-center gap-3">
                  <h3
                    class="text-base font-bold text-white group-hover:text-primary transition-colors"
                    id="{{ tier.id }}-desktop"
                  >
                    {{ tier.name }}
                  </h3>
                  @if (tier.highlighted) {
                    <app-badge variant="soft" color="accent"> Popular </app-badge>
                  }
                </div>
              </div>

              <!-- Best For -->
              <div class="col-span-4 text-sm text-white/70 leading-relaxed text-pretty" role="cell">
                {{ tier.bestFor }}
              </div>

              <!-- Timeline -->
              <div class="col-span-2 text-center" role="cell">
                <app-badge variant="outline" color="neutral">
                  {{ tier.timeline }}
                </app-badge>
              </div>

              <!-- Investment -->
              <div class="col-span-2 text-center text-sm font-semibold text-white" role="cell">
                {{ tier.investment }}
              </div>

              <!-- Action -->
              <div class="col-span-1 flex justify-end" role="cell">
                <app-button [href]="tier.ctaLink" variant="ghost" styleClass="text-primary">
                  <span class="sr-only">{{ tier.ctaText }}</span>
                  <svg
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M12.75 15l3-3m0 0l-3-3m3 3h-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                </app-button>
              </div>
            </div>
          </app-card>
        }
      </div>
    </div>
  </div>
</section>
