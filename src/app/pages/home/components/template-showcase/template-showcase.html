<section class="section-padding bg-secondary relative overflow-hidden border-t border-white/5">
  <!-- Technical Grid -->
  <div class="absolute inset-0 -z-10 bg-[size:40px_40px] bg-grid-white/[0.02]"></div>
  <div
    class="absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"
  ></div>

  <div class="layout-container relative z-10">
    <!-- Header -->
    <app-section-header
      subtitle="SYSTEM_TEMPLATES"
      title="Rapid Deployment Units"
      description="Production-ready templates built with enterprise standards. Pick a unit, customize parameters, deploy to production."
      class="font-mono"
    />

    <!-- Templates Grid -->
    <div class="grid max-w-md grid-cols-1 gap-8 lg:max-w-none lg:grid-cols-3 mx-auto lg:mx-0">
      @for (template of featuredTemplates(); track template.id; let index = $index) {
        <a
          routerLink="/shop"
          class="block h-full group outline-none focus-visible:ring-1 focus-visible:ring-primary"
        >
          <app-card
            [interactive]="true"
            [variant]="template.price === 'Free' ? 'highlight' : 'default'"
            class="h-full flex flex-col p-0 overflow-hidden border border-white/10 hover:border-primary/50 transition-colors"
          >
            <!-- Technical Header -->
            <div
              class="flex items-center justify-between px-3 py-2 bg-white/[0.02] border-b border-white/5 text-[10px] font-mono text-white/40"
            >
              <div class="flex items-center gap-2">
                <span>UNIT_0{{ index + 1 }}</span>
                <span class="w-px h-3 bg-white/10"></span>
                <span>ID: {{ template.id | uppercase }}</span>
              </div>
              <div class="flex gap-1">
                <div class="w-1 h-1 bg-white/20"></div>
                <div class="w-1 h-1 bg-white/20"></div>
                <div class="w-1 h-1 bg-white/20"></div>
              </div>
            </div>

            <!-- Image Container -->
            <figure
              class="relative aspect-[16/10] w-full overflow-hidden bg-black/40 sm:aspect-[3/2] lg:aspect-[16/10]"
            >
              <!-- Badge -->
              @if (template.badge) {
                <div class="absolute top-2 right-2 z-30">
                  <div
                    class="bg-accent/10 backdrop-blur-md border border-accent/20 text-accent px-2 py-0.5 text-[10px] font-mono uppercase tracking-wider shadow-lg"
                  >
                    {{ template.badge }}
                  </div>
                </div>
              }

              <!-- Scanlines -->
              <div
                class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSIxIiBmaWxsPSJyZ2JhKDAsIDAsIDAsIDAuMykiLz4KPC9zdmc+')] pointer-events-none z-20 opacity-30"
              ></div>

              <img
                [src]="template.image"
                [alt]="template.name"
                loading="lazy"
                width="500"
                height="313"
                class="absolute inset-0 h-full w-full object-cover transition duration-700 group-hover:scale-105 opacity-80 group-hover:opacity-100 grayscale group-hover:grayscale-0"
              />
            </figure>

            <!-- Content -->
            <div
              class="flex flex-1 flex-col p-6 border-t border-white/5 bg-black/20 backdrop-blur-sm"
            >
              <h3
                class="text-lg font-mono uppercase tracking-tight text-white group-hover:text-primary transition-colors mb-2"
              >
                > {{ template.name }}
              </h3>
              <p class="text-xs leading-5 text-white/50 font-mono border-l border-white/5 pl-3">
                {{ template.tagline }}
              </p>

              <div
                class="mt-6 flex items-center justify-between pt-4 border-t border-white/5 border-dashed"
              >
                <div class="flex items-center gap-2">
                  <div
                    class="w-1.5 h-1.5 rounded-sm"
                    [class.bg-accent]="template.price !== 'Free'"
                    [class.bg-primary]="template.price === 'Free'"
                  ></div>
                  <span class="text-[10px] font-mono uppercase text-white/60 tracking-wider">{{
                    template.price === 'Free' ? 'OPEN_SOURCE' : 'LICENSED'
                  }}</span>
                </div>

                <div
                  class="text-sm font-mono text-white group-hover:text-primary transition-colors"
                >
                  {{ template.price }}
                </div>
              </div>
            </div>
          </app-card>
        </a>
      }
    </div>

    <!-- Bottom Link -->
    <div class="mt-16 text-center">
      <app-button
        href="/shop"
        variant="ghost"
        styleClass="font-mono text-xs uppercase tracking-widest border border-white/10 hover:border-primary hover:text-primary transition-all"
      >
        // Browse All Units
      </app-button>
    </div>
  </div>
</section>
